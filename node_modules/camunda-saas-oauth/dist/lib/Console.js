"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getConsoleToken = void 0;
const camunda_8_credentials_from_env_1 = require("camunda-8-credentials-from-env");
const OAuthProviderImpl_1 = require("./OAuthProviderImpl");
let consoleOAuthProvider;
function getConsoleToken(userAgentString) {
    if (consoleOAuthProvider === undefined) {
        const creds = (0, camunda_8_credentials_from_env_1.getConsoleCredentials)();
        consoleOAuthProvider = new OAuthProviderImpl_1.OAuthProviderImpl({
            userAgentString,
            audience: creds.CAMUNDA_CONSOLE_OAUTH_AUDIENCE,
            clientId: creds.CAMUNDA_CONSOLE_CLIENT_ID,
            clientSecret: creds.CAMUNDA_CONSOLE_CLIENT_SECRET,
            authServerUrl: creds.CAMUNDA_OAUTH_URL
        });
    }
    return consoleOAuthProvider.getToken('CONSOLE');
}
exports.getConsoleToken = getConsoleToken;
